<!--
  Generated template for the Step2 page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar hideBackButton="true">
    <ion-title>ความประสงค์ในการดำเนินการ</ion-title>
    <ion-buttons end>
      <!-- <button ion-button [navPush]="step3Page">save</button> -->
      <button ion-button (click)='saveData()'>ต่อไป</button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <ion-card-content>
    <ul class="breadcrumb">
      <li><a href="#" (click)='goTo(1,keyin_id)'>step 1</a></li>
      <li><a href="#" (click)='goTo(2,keyin_id)'>step 2</a></li>
      <li><a href="#" class="active">step 3</a></li>
      <li><a href="#" (click)='goTo(4,keyin_id)' class="disabled">step 4</a></li>
      <li><a href="#" (click)='goTo(5,keyin_id)' class="disabled">step 5</a></li>
    </ul>
  </ion-card-content>
  <form [formGroup]="complainForm">
    <ion-card-content>
      <ion-list-header>
        ความประสงค์ในการดำเนินการ
      </ion-list-header>
      <ion-item>
        <ion-label floating>ประเภทเรื่อง</ion-label>
        <ion-select [(ngModel)]="complain_type_id" formControlName="complain_type_id" [class.invalid]="!complainForm.controls.complain_type_id.valid && (complainForm.controls.complain_type_id.dirty || submitAttempt)"
          (ionChange)="onChangeComplainType()">
          <ion-option *ngFor="let complain of complain_type_id_sel" [value]="complain.id">{{complain.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      <span id="complain_type_1" class="complain_type_1">
      <ion-item>
        <ion-label floating>ประเภทเรื่องย่อย</ion-label>
        <ion-select [(ngModel)]="complain_type_id_1" [ngModelOptions]="{standalone: true}" (ionChange)="onChangeComplainType1()">
          <ion-option *ngFor="let complain of complain_type_1" [value]="complain.id">{{complain.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      </span>
      <span id="complain_type_2" class="complain_type_2">
      <ion-item>
        <ion-label floating>ประเภทเรื่องย่อย</ion-label>
        <ion-select [(ngModel)]="complain_type_id_2" [ngModelOptions]="{standalone: true}">
          <ion-option *ngFor="let complain of complain_type_2" [value]="complain.id">{{complain.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      </span>
      <ion-item *ngIf="!complainForm.controls.complain_type_id.valid && (complainForm.controls.complain_type_id.dirty || submitAttempt)">
        <p>กรุณาเลือกประเภทเรื่อง</p>
      </ion-item>
      <ion-item>
        <ion-label floating>หัวข้อเรื่อง</ion-label>
        <ion-input [(ngModel)]="complain_name" formControlName="complain_name" name="complain_name" type="text" [class.invalid]="!complainForm.controls.complain_name.valid && (complainForm.controls.complain_name.dirty || submitAttempt)"></ion-input>
      </ion-item>
      <ion-item *ngIf="!complainForm.controls.complain_name.valid && (complainForm.controls.complain_name.dirty || submitAttempt)">
        <p>กรุณากรอกหัวข้อเรื่อง</p>
      </ion-item>
      <ion-item>
        <ion-label floating>ช่องทางรับเรื่อง</ion-label>
        <ion-select [(ngModel)]="channel_id" formControlName="channel_id" [class.invalid]="!complainForm.controls.channel_id.valid && (complainForm.controls.channel_id.dirty || submitAttempt)">
          <ion-option *ngFor="let channel of channel_id_sel" [value]="channel.id">{{channel.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      <ion-item *ngIf="!complainForm.controls.channel_id.valid && (complainForm.controls.channel_id.dirty || submitAttempt)">
        <p>กรุณาเลือกช่องทางรับเรื่อง</p>
      </ion-item>
      <ion-item>
        <ion-label floating>ลักษณะเรื่อง</ion-label>
        <ion-select [(ngModel)]="subject_id" formControlName="subject_id" [class.invalid]="!complainForm.controls.subject_id.valid && (complainForm.controls.subject_id.dirty || submitAttempt)">
          <ion-option *ngFor="let subject of subject_id_sel" [value]="subject.id">{{subject.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      <ion-item *ngIf="!complainForm.controls.subject_id.valid && (complainForm.controls.subject_id.dirty || submitAttempt)">
        <p>กรุณาเลือกลักษณะเรื่อง</p>
      </ion-item>
      <ion-item>
        <ion-label floating>หน่วยงานหรือผู้ถูกร้องเรียนร้องทุกข์</ion-label>
        <ion-select [(ngModel)]="accused_type_id" formControlName="accused_type_id" [class.invalid]="!complainForm.controls.accused_type_id.valid && (complainForm.controls.accused_type_id.dirty || submitAttempt)"
          (ionChange)="onChangeAccusedType()">
          <ion-option *ngFor="let complain of accused_type_id_sel" [value]="complain.id">{{complain.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      <span id="accused_type_1" class="accused_type_1">
      <ion-item>
        <ion-label floating>หน่วยงานหรือผู้ถูกร้องเรียนร้องทุกข์ย่อย</ion-label>
        <ion-select [(ngModel)]="accused_type_id_1" [ngModelOptions]="{standalone: true}" (ionChange)="onChangeAccusedType1()">
          <ion-option *ngFor="let complain of accused_type_1" [value]="complain.id">{{complain.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      </span>
      <span id="accused_type_2" class="accused_type_2">
      <ion-item>
        <ion-label floating>หน่วยงานหรือผู้ถูกร้องเรียนร้องทุกข์ย่อย</ion-label>
        <ion-select [(ngModel)]="accused_type_id_2" [ngModelOptions]="{standalone: true}">
          <ion-option *ngFor="let complain of accused_type_2" [value]="complain.id">{{complain.name}}</ion-option>
          <!--<ion-option >test</ion-option>-->
        </ion-select>
      </ion-item>
      </span>
      <ion-item *ngIf="!complainForm.controls.accused_type_id.valid && (complainForm.controls.accused_type_id.dirty || submitAttempt)">
        <p>กรุณาเลือกหน่วยงานหรือผู้ถูกร้องเรียนร้องทุกข์</p>
      </ion-item>
      <ion-item>
        <ion-label floating>ชื่อผู้ถูกร้องเรียน</ion-label>
        <ion-input [(ngModel)]="accused_name" name="accused_name" type="text" [ngModelOptions]="{standalone: true}"></ion-input>
      </ion-item>
      <!-- <ion-list>
        <ion-list-header>
          ความประสงค์
        </ion-list-header>
        <ion-item *ngFor="let complain of wish_id_sel;">
          <ion-label>{{complain.name}}</ion-label>
          <ion-checkbox></ion-checkbox>
        </ion-item>
      </ion-list> -->
      <ion-item>
        <ion-label floating>ความประสงค์</ion-label>
        <ion-select [(ngModel)]="wish" [ngModelOptions]="{standalone: true}" multiple="true" cancelText="ยกเลิก" okText="ตกลง!">
          <ion-option *ngFor="let wish of wish_id_sel;" value="{{wish.id}}">{{wish.name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label>ความประสงค์อื่น</ion-label>
      </ion-item>
      <ion-item>
        <ion-textarea [(ngModel)]="wish_detail" [ngModelOptions]="{standalone: true}"></ion-textarea>
      </ion-item>
    </ion-card-content>
  </form>
</ion-content>